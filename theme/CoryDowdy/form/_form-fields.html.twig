{# Labels #}

{% block form_label %}
    {% spaceless %}
        {% if label is not sameas(false) %}
            {% if not compound %}
                {% set label_attr = label_attr|merge({'for': id}) %}
            {% endif %}
            {% if required %}
                {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' required')|trim}) %}
            {% endif %}
            {% if label is empty %}
                {% set label = name|humanize %}
            {% endif %}
            <label{% for attrname, attrvalue in label_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>{{ label|trans({}, translation_domain) }}</label>
        {% endif %}
    {% endspaceless %}
{% endblock form_label %}





{% block form_row %}
    {% spaceless %}
        {{ form.vars.attr.prefix|raw }}
        <div {% if form.vars.attr.type is defined %}class="name-email-container simpleform-{{ form.vars.attr.type }}"{% endif %}>
            {{ form_label(form) }}
            {{ form_errors(form) }}
            {{ form_widget(form) }}
        </div>
        {{ form.vars.attr.postfix|raw }}
    {% endspaceless %}
{% endblock form_row %}

{# Override widget_attributes to prevent 'prefix', 'postfix' etc to show up as attributes in <input> fields. #}
{% block widget_attributes %}
    {% spaceless %} id="{{ id }}" name="{{ full_name }}"
        {%- if read_only %} readonly="readonly"{% endif %}
        {%- if disabled %} disabled="disabled"{% endif %}
        {%- if required %} required="required"{% endif %}
        {%- if max_length %} maxlength="{{ max_length }}"{% endif %}
        {%- if pattern %} pattern="{{ pattern }}"{% endif %}
        {%- for attrname, attrvalue in attr %}{% if attrname in ['placeholder', 'title', 'value', 'autocomplete' ] %} {{ attrname }}="{{ attrvalue|trans({}, translation_domain) }}" {% elseif 'data-' in attrname %}{{ attrname }}="{{ attrvalue }}" {% endif %}{% endfor %}
    {% endspaceless %}
{% endblock widget_attributes %}


{# Override widget_container_attributes to prevent 'prefix', 'postfix' etc to show up as attributes in blocks of <input> fields. #}
{% block widget_container_attributes %}
    {% spaceless %}
        {% if id is not empty %}id="{{ id }}" {% endif %}
        {% for attrname, attrvalue in attr %}
            {% if 'data-' in attrname %}{{ attrname }}="{{ attrvalue }}" {% endif %}
        {% endfor %}
    {% endspaceless %}
{% endblock widget_container_attributes %}




{# text input fields #}
{% block text_widget %}
    {% spaceless %}
        {% set type = type|default('text') %}
        <input type="{{ type }}"
                {{ block('widget_attributes') }}
                {% if value is not empty %}value="{{ value }}" {% endif %}
                {% if required %}
                data-parsley-required
                data-parsley-trigger="change"
                {% endif %}
                data-parsley-minlength="2"
                data-parsley-minlength-message="Please Enter At least 2 Characters for your name"
                {% if max_length %}
                data-parsley-maxlength="{{ max_length }}"
                {% endif %}/>
    {% endspaceless %}
{% endblock text_widget %}





{# Email Input Field #}
{% block email_widget %}
    {% spaceless %}
        {% set type = type|default('email') %}
    <input type="{{ type }}"
            {{ block('widget_attributes') }}
            {% if value is not empty %}value="{{ value }}" {% endif %}
           data-parsley-type="email"
           {% if required %}
           data-parsley-required
           data-parsley-trigger="change"
           {% endif %}
            />
    {% endspaceless %}
{% endblock email_widget %}

{# Text Area Widget #}
{% block textarea_widget %}
    {% spaceless %}
        <textarea {{ block('widget_attributes') }}
                {% if required  %}
                data-parsley-required
                data-parsley-trigger="change"
                data-parsley-validation-threshold="4"
                {% endif %}
                data-parsley-minlength="5"
                data-parsley-minlength-message="Please Enter A message of at least 5 characters and no longer than {{ max_length }}"
                {% if max_length %}
                data-parsley-maxlength="{{ max_length }}"
                {% endif %}>{{ value }}</textarea>
    {% endspaceless %}
{% endblock textarea_widget %}

