{% extends 'base.html.twig' %}

{% block inlined_styles %}
  <style>
        {% include 'css/critical-css/categories.07212015.css' %}
    </style>
{% endblock %}



{% block body %}

  <!-- Main Blog Content -->
  <div class="push-down" role="content">

    <div class="container">
      <div class="full">
        {% if taxonomytype is defined %}
          <h2>
            {{ __('Category: ') }}
            {% if taxonomy.options[slug] is defined %}
              {{ taxonomy.options[slug] }}
            {% else %}
              {{ slug }}
            {% endif %}
          </h2>
        {% endif %}
      </div>
        <div class="blog-list">
           {% for record in records %}
            <article class="blog-list--post" itemscope="" itemtype="http://schema.org/BlogPosting">
              <header>
                <h2 class="blog-list--title" itemprop="headline url">
                  <a href="{{ record.link }}">{{ record.title }}</a>
                </h2>
                {% set recdate = blogpost.datepublish|localdate("%A %B %e, %Y") %}
                <p class="pub-date" itemprop="datePublished">
                  {{ __('Posted on %date%',{ '%date%': recdate }) }}
                </p>
              </header>
              <p class="blog-teaser" itemprop="description">
                  {{ record.teaser }}
              </p>
              <ul class="blog-list--info">
                <li>
                  <a lass="blog-list--post-link" itemprop="url"
                     href="{{ record.link }}">{{ __('Read Post &#10141;') }}
                  </a>
                </li>
              </ul>
          </article>
            <hr/>
          {% endfor %}
        </div>
        <aside class="blog-list--sidebar">
          {% include 'form/_blog-search.html.twig' %}

          <ul class="blog--category-list">
            <li class="category-list-header">Categories</li>
            {% setcontent blogCategories = "blog"  %}
            {% for blogCategory in blogCategories %}

              {% if blogCategory.taxonomy.categories is defined %}

                {% for value, category in blogCategory.taxonomy.categories %}
                  <li class="category-list-item">
              <a href="{{ value }}">{{ category }}</a>
            </li>
                {% endfor %}

              {% endif %}

            {% endfor %}
          </ul>
          <ul class="blog--category-list">
            <li class="category-list-header">Latest Blog Posts</li>
            {% setcontent posts = "blog/latest/5"  %}
              {% for post in posts %}
            <li class="category-list-item">
              <a href="{{ post.link }}">{{ post.title }}</a>
            </li>
            {% endfor %}
          </ul>
        </aside>
      </div>

  </div>

{% endblock body %}
{% block footer_javascripts %}
  {{ parent() }}
  <script src="{{ paths.theme}}js/navigation.04222015.min.js" async defer ></script>
  <script src="{{ paths.theme}}js/lib/visited-localstorage.min.js" async defer ></script>
{% endblock footer_javascripts %}
